<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Data Sync</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
        }
        .section {
            margin: 20px 0;
            padding: 20px;
            border: 2px solid #d2691e;
            border-radius: 10px;
        }
        button {
            background: #d2691e;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #8b4513;
        }
        pre {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>üîß Data Sync Test Tool</h1>
    <p>This tool helps you verify that data is being saved and loaded correctly between index.html and dashboard.html</p>

    <div class="section">
        <h2>üìä Current Data in localStorage</h2>
        <button onclick="viewData()">View All Data</button>
        <button onclick="clearAllData()">Clear All Data</button>
        <div id="dataDisplay"></div>
    </div>

    <div class="section">
        <h2>‚ûï Add Test Event</h2>
        <button onclick="addTestEvent()">Add Test Event</button>
        <p id="eventStatus"></p>
    </div>

    <div class="section">
        <h2>üë• Add Test Member</h2>
        <button onclick="addTestMember()">Add Test Member</button>
        <p id="memberStatus"></p>
    </div>

    <div class="section">
        <h2>‚úâÔ∏è Add Test Message</h2>
        <button onclick="addTestMessage()">Add Test Message</button>
        <p id="messageStatus"></p>
    </div>

    <div class="section">
        <h2>üí∞ Add Test Donation</h2>
        <button onclick="addTestDonation()">Add Test Donation ($100)</button>
        <p>This will add a test donation with donor name and email.</p>
    </div>

    <div class="section">
        <h2>üñºÔ∏è Gallery Test</h2>
        <button onclick="seedTestGallery()">Seed Test Album + Images</button>
        <button onclick="clearGallery()">Clear Gallery</button>
        <p id="galleryStatus"></p>
    </div>

    <script>
        function viewData() {
            const members = JSON.parse(localStorage.getItem('churchMembers')) || [];
            const events = JSON.parse(localStorage.getItem('churchEvents')) || [];
            const messages = JSON.parse(localStorage.getItem('churchMessages')) || [];
            const donations = JSON.parse(localStorage.getItem('churchDonations')) || [];
            const gallery = JSON.parse(localStorage.getItem('churchGallery')) || [];

            const display = document.getElementById('dataDisplay');
            display.innerHTML = `
                <h3>Members (${members.length})</h3>
                <pre>${JSON.stringify(members, null, 2)}</pre>
                
                <h3>Events (${events.length})</h3>
                <pre>${JSON.stringify(events, null, 2)}</pre>
                
                <h3>Messages (${messages.length})</h3>
                <pre>${JSON.stringify(messages, null, 2)}</pre>
                
                <h3>Donations (${donations.length})</h3>
                <pre>${JSON.stringify(donations, null, 2)}</pre>

                <h3>Gallery (${gallery.length} album(s))</h3>
                <pre>${JSON.stringify(gallery, null, 2)}</pre>
            `;
        }

        function clearAllData() {
            if (confirm('Are you sure you want to clear ALL data? This cannot be undone!')) {
                localStorage.removeItem('churchMembers');
                localStorage.removeItem('churchEvents');
                localStorage.removeItem('churchMessages');
                localStorage.removeItem('churchDonations');
                alert('All data cleared!');
                viewData();
            }
        }

        function addTestEvent() {
            const events = JSON.parse(localStorage.getItem('churchEvents')) || [];
            const testEvent = {
                name: 'Test Event ' + (events.length + 1),
                description: 'This is a test event added from the test page',
                date: '2025-11-15',
                time: '14:00',
                location: 'Test Location'
            };
            
            events.push(testEvent);
            localStorage.setItem('churchEvents', JSON.stringify(events));
            
            document.getElementById('eventStatus').innerHTML = '‚úÖ Test event added! Refresh index.html or dashboard.html to see it.';
            viewData();
        }

        function addTestMember() {
            const members = JSON.parse(localStorage.getItem('churchMembers')) || [];
            const testMember = {
                firstName: 'Test',
                lastName: 'Member ' + (members.length + 1),
                email: 'test' + (members.length + 1) + '@example.com',
                phone: '555-0100',
                ageGroup: 'adult',
                interests: ['Worship Team', 'Bible Study'],
                source: 'Test page',
                registeredDate: new Date().toLocaleDateString()
            };
            
            members.push(testMember);
            localStorage.setItem('churchMembers', JSON.stringify(members));
            
            document.getElementById('memberStatus').innerHTML = '‚úÖ Test member added! Check dashboard.html to see it.';
            viewData();
        }

        function addTestMessage() {
            const messages = JSON.parse(localStorage.getItem('churchMessages')) || [];
            const testMessage = {
                name: 'Test User',
                email: 'test@example.com',
                subject: 'general',
                message: 'This is a test message from the test page',
                date: new Date().toLocaleDateString() + ' ' + new Date().toLocaleTimeString()
            };
            
            messages.push(testMessage);
            localStorage.setItem('churchMessages', JSON.stringify(messages));
            
            document.getElementById('messageStatus').innerHTML = '‚úÖ Test message added! Check dashboard.html to see it.';
            viewData();
        }

        function addTestDonation() {
            const donations = JSON.parse(localStorage.getItem('churchDonations')) || [];
            const testDonation = {
                name: 'John Doe',
                email: 'john.doe@example.com',
                amount: '100.00',
                type: 'general',
                frequency: 'once',
                message: 'God bless!',
                anonymous: false,
                date: new Date().toLocaleDateString()
            };
            
            donations.push(testDonation);
            localStorage.setItem('churchDonations', JSON.stringify(donations));
            
            alert('‚úÖ Test donation added! Check dashboard.html to see it.');
            viewData();
        }

        function seedTestGallery() {
            const now = Date.now();
            const gallery = [
                {
                    id: now,
                    name: 'Sample Album',
                    description: 'Demo images to test rendering',
                    images: [
                        'https://images.unsplash.com/photo-1520975922284-85d3a6f2e9aa?q=80&w=1200&auto=format&fit=crop',
                        'https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1200&auto=format&fit=crop',
                        'https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?q=80&w=1200&auto=format&fit=crop'
                    ]
                }
            ];
            localStorage.setItem('churchGallery', JSON.stringify(gallery));
            document.getElementById('galleryStatus').textContent = '‚úÖ Gallery seeded. Open index.html#gallery to see the album.';
            viewData();
        }

        function clearGallery() {
            localStorage.removeItem('churchGallery');
            document.getElementById('galleryStatus').textContent = 'üóëÔ∏è Gallery cleared';
            viewData();
        }

        // Load data on page load
        viewData();
    </script>
</body>
</html>
